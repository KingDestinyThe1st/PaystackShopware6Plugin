!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/administration/",n(n.s="DkEm")}({DkEm:function(e,t,n){"use strict";n.r(t);var a=n("Z/J+"),r=n("l0R2"),s=n("o8Py"),i=n("c3X+"),l=n.n(i),o=Shopware,c=o.Component,d=o.Mixin,h=Shopware.Data.Criteria;c.register("paystack-settings-page",{template:l.a,inject:["repositoryFactory","syncService"],mixins:[d.getByName("notification")],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{id:null,entity:void 0,secretKey:null,publicKey:null,paymentMethodId:null,isDefaultForStorefront:void 0,isDefaultForHeadless:void 0,isActivatedforStorefront:void 0,isActivatedForHeadless:void 0,salesChannels:null,salesChannelsAvailability:{},salesChannelsDefault:{},falseBoolean:!1,defaultPaymentMethod:[],salesChannelsData:[],salesChannelData:{},isLoading:!0}},computed:{paystackKeysRepository:function(){return this.repositoryFactory.create("paystack_keys")},salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},salesChannelPaymentMethodRepository:function(){return this.repositoryFactory.create("sales_channel_payment_method")}},methods:{makeDefault:function(e){var t=this,n=new h;this.salesChannelRepository.search(n,Shopware.Context.api).then((function(n){t.salesChannels=n;for(var a=0;a<n.length;a++)if(n[a].id===e)for(var r=0;r<n[a].paymentMethodIds.length;r++)n[a].paymentMethodIds[r]===t.paymentMethodId&&t.makeDefaultPaymentMethod(e)}))},getPaystackData:function(){var e=this;this.isLoading=!0;var t=new h;this.paystackKeysRepository.search(t,Shopware.Context.api).then((function(t){e.secretKey=t[0].secretKey,e.publicKey=t[0].publicKey,e.paymentMethodId=t[0].paymentMethodId,e.id=t[0].id})),this.salesChannelRepository.search(t,Shopware.Context.api).then((function(t){e.salesChannels=t}))},updateSecretPublicKeys:function(){var e=this;this.isLoading=!0,this.paystackKeysRepository.get(this.id,Shopware.Context.api).then((function(t){t.publicKey=e.publicKey,t.secretKey=e.secretKey,e.paystackKeysRepository.save(t,Shopware.Context.api)})),this.isLoading=!1},makeDefaultPaymentMethod:function(e){var t=this;this.isLoading=!0,this.salesChannelRepository.get(e,Shopware.Context.api).then((function(e){e.paymentMethodId=t.paymentMethodId,t.salesChannelRepository.save(e,Shopware.Context.api)})),this.isLoading=!1,this.createNotificationSuccess({title:"Paystack Has Been Set As Default Payment Method"})},activatePaymentMethod:function(e){this.isLoading=!0,this.entity=this.salesChannelPaymentMethodRepository.create(Shopware.Context.api),this.entity.paymentMethodId=this.paymentMethodId,this.entity.salesChannelId=e,this.salesChannelPaymentMethodRepository.save(this.entity,Shopware.Context.api),this.isLoading=!1},deleteSalesChannelPaymentMethod:function(e){this.isLoading=!0;var t=[{action:"delete",entity:"sales_channel_payment_method",payload:[{salesChannelId:e,paymentMethodId:this.paymentMethodId}]}];this.syncService.sync(t,{},{"single-operation":1}),this.isLoading=!1},paystackIsDefault:function(){this.isLoading=!0;for(var e=0;e<this.salesChannels.length;e++)this.salesChannels[e].paymentMethodId,this.paymentMethodId,this.salesChannelsData.push(this.salesChannelData);this.isLoading=!1}},created:function(){this.getPaystackData()},mounted:function(){},watch:{salesChannels:function(){this.isLoading=!1},isLoading:function(){}}}),Shopware.Module.register("paystack-settings",{type:"plugin",name:"heading.name",title:"heading.title",description:"heading.description",color:"#62ff80",icon:"default-money-wallet",snippets:{"de-DE":a,"en-GB":r,"fr-FR":s},routes:{index:{component:"paystack-settings-page",path:"index"}},settingsItem:{group:"plugins",to:"paystack.settings.index",icon:"default-money-wallet",backgroundEnabled:!0,color:"#28a745"}})},"Z/J+":function(e){e.exports=JSON.parse('{"heading":{"title":"Paystack-Einstellungen","name":"Paystack","description":"Akzeptieren Sie Zahlungen mit Paystack","saleschannel":"Verkaufskanal"},"input":{"label":{"secretKey":"Geheimer Schlüssel","publicKey":"Öffentlicher Schlüssel","helper":{"secretKey":"Geben Sie den geheimen Schlüssel von Ihrem Paystack-Dashboard ein","publicKey":"Geben Sie den öffentlichen Schlüssel aus Ihrem Paystack-Dashboard ein"}}},"button":{"save":"Einstellungen Speichern","activate":"Aktivieren Sie für","deactivate":"Für Deaktivieren","default":"Als Standard Festlegen Für","label":{"activate":"Paystack-Zahlungsmethode Aktivieren Für","deactivate":"Paystack-Zahlungsmethode Deaktivieren Für","default":"Machen Sie Paystack Zur Standardzahlungsmethode Für"},"name":{"activate":"Aktivieren Sie Für","deactivate":"Für Deaktivieren","default":"Als Standard Festlegen Für"}}}')},"c3X+":function(e,t){e.exports='{% block paystack_settings_page %}\r\n\r\n    <sw-page class="paystack_settings">\r\n        <template slot="content">\r\n\r\n        \r\n        {% block paystack_loader %}\r\n            <sw-loader v-if="isLoading" size="40px" >\r\n                Loading...\r\n            </sw-loader>\r\n        {% endblock %}\r\n\r\n\r\n       \r\n    {% block paystack_content %}\r\n        <sw-card-view>\r\n\r\n\r\n\r\n    \r\n    <div>\r\n    \r\n        <sw-label>\r\n            {{ $tc(\'input.label.secretKey\') }} <sw-help-text :text="$tc(\'input.label.helper.secretKey\')"  />\r\n        </sw-label>         \r\n            \r\n            <sw-password-field \r\n                :placeholder="$tc(\'input.label.secretKey\')" \r\n                v-model="secretKey"\r\n            >\r\n\r\n            </sw-text-field>\r\n    </div>\r\n\r\n\r\n    <div>\r\n        <sw-label>\r\n            {{ $tc(\'input.label.publicKey\') }} <sw-help-text :text="$tc(\'input.label.helper.publicKey\')" />\r\n        </sw-label>  \r\n\r\n        <sw-password-field \r\n        :placeholder="$tc(\'input.label.publicKey\')"\r\n        v-model="publicKey"\r\n        />                   \r\n    </div>\r\n\r\n\r\n    <div>            \r\n        <sw-button class="paystack-btn" @click="updateSecretPublicKeys">\r\n             {{ $tc(\'button.save\') }}\r\n        </sw-button>\r\n    </div>\r\n\r\n\r\n\r\n    <br/>\r\n    <hr>\r\n    <br/>\r\n\r\n       \r\n\r\n     <div v-for="(salesChannel, i) in salesChannels" :key="i">\r\n\r\n        <div>  \r\n            <sw-label>{{$tc(\'button.label.activate\')}} {{ salesChannel.name}} {{$tc(\'heading.saleschannel\')}}</sw-label><br/>          \r\n                <sw-button class="paystack-btn" @click="activatePaymentMethod(salesChannel.id)" \r\n                style="background:#26b6cf; color:#fff;" >\r\n                    {{$tc(\'button.name.activate\')}} {{ salesChannel.name }}                              \r\n                </sw-button>\r\n        </div>\r\n\r\n        <br/>\r\n\r\n\r\n     </div>\r\n\r\n\r\n     <div v-for="(salesChannel, i) in salesChannels" :key="i">\r\n\r\n        <div>  \r\n            <sw-label>{{$tc(\'button.label.deactivate\')}} {{ salesChannel.name}} {{$tc(\'heading.saleschannel\')}}</sw-label><br/>          \r\n                <sw-button class="paystack-btn" @click="deleteSalesChannelPaymentMethod(salesChannel.id)" \r\n                style="background:#dc3545; color:#fff;" >\r\n                    {{$tc(\'button.name.deactivate\')}} {{ salesChannel.name }}                              \r\n                </sw-button>\r\n        </div>\r\n\r\n        <br/>\r\n\r\n\r\n     </div>\r\n\r\n\r\n\r\n     <div v-for="(salesChannel, i) in salesChannels" :key="i">\r\n\r\n        <div>  \r\n            <sw-label>{{$tc(\'button.label.default\')}} {{ salesChannel.name}} {{$tc(\'heading.saleschannel\')}}</sw-label><br/>          \r\n                <sw-button class="paystack-btn" @click="makeDefault(salesChannel.id)" \r\n                style="background:#28a745; color:#fff;" >\r\n                    {{$tc(\'button.name.default\')}} {{ salesChannel.name }}                              \r\n                </sw-button>\r\n        </div>\r\n\r\n        <br/>\r\n\r\n\r\n     </div>\r\n\r\n\r\n\r\n</sw-card-view>\r\n\r\n{% endblock %}\r\n\r\n        \r\n\r\n      \r\n\r\n\r\n        \r\n\r\n\r\n\r\n\r\n        </template>\r\n    </sw-page>\r\n{% endblock %}\r\n'},l0R2:function(e){e.exports=JSON.parse('{"heading":{"title":"Paystack Settings","name":"Paystack","description":"Accept Payments With Paystack","saleschannel":"Sales Channel"},"input":{"label":{"secretKey":"Secret Key","publicKey":"Public Key","helper":{"secretKey":"Enter Secret Key From Your Paystack Dashboard","publicKey":"Enter Public Key From Your Paystack Dashboard"}}},"button":{"save":"Save Settings","activate":"Activate For","deactivate":"Deactivate For","default":"Make Default For","label":{"activate":"Activate Paystack Payment Method For","deactivate":"Deactivate Paystack Payment Method For","default":"Make Paystack The Default Payment Method For "},"name":{"activate":"Activate For","deactivate":"Deactivate For","default":"Make Default For"}}}')},o8Py:function(e){e.exports=JSON.parse('{"heading":{"title":"Paystack Réglages","name":"Paystack","description":"Accepter Les Paiements Avec Paystack","saleschannel":"Canal De Vente"},"input":{"label":{"secretKey":"Clef Secrète","publicKey":"Clé Publique","helper":{"secretKey":"Entrez la clé secrète à partir de votre tableau de bord Paystack","publicKey":"Entrez la clé publique à partir de votre tableau de bord Paystack"}}},"button":{"save":"Enregistrer Les Paramètres","activate":"Activer Pour","deactivate":"Désactiver Pour","default":"Définir Par Défaut Pour","label":{"activate":"Activer le mode de paiement Paystack pour","deactivate":"Désactiver le mode de paiement Paystack pour","default":"Faire de Paystack le mode de paiement par défaut pour"},"name":{"activate":"Activer Pour","deactivate":"Désactiver Pour","default":"Définir Par Défaut Pour"}}}')}});